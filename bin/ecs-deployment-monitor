#!/usr/bin/env node
'use strict'

const colors = require('colors/safe');
const clui = require('clui');
const moment = require('moment');
const _ = require('lodash');
const indent = require('indent');
const monitor = require('../');
const Renderer = require('../lib/renderer');

const indentWidth = 4;

var argv = require('yargs')
  .demand([ 'cluster', 'service-name', 'task-definition' ])
  .default('failure-threshold', '.25')
  .argv;

var deployment = monitor({
  serviceName: argv.serviceName,
  clusterArn: argv.cluster,
  taskDefinitionArn: argv.taskDefinition,
  failureThreshold: parseFloat(argv.failureThreshold),
});

deployment.on('error', (err) => { throw err } );

Renderer.watch(deployment, process.stdout);
